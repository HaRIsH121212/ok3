<section class="section">
  <img src="assets/4391.jpg" alt="Background Image" class="background-image">

  <!-- <div class="marquee-container">
    <marquee behavior="scroll" direction="left" class="marquee-text">
      Welcome to EASYDOC Registration page!
    </marquee>
  </div> -->

  <div class="form-container">
    <div class="card">
      <div class="card-header text-center">
        <h4 style="color: white;"><b>Register</b></h4>
      </div>
      <div class="card-body">
        <div *ngIf="responseMessage" class="alert alert-success mt-3">
          {{ responseMessage }}
        </div>
        <div *ngIf="errorMessage" class="alert alert-success mt-3 error-message">
          {{ errorMessage }}
        </div>

        <form [formGroup]="itemForm" (ngSubmit)="onRegister()">
          <!-- Username Field -->
          <div class="form-group mb-3">
            <label for="username">Username</label>
            <input type="text" id="username" formControlName="username" class="form-control"
              placeholder="Enter username"
              [ngClass]="{ 'is-invalid': itemForm.get('username')?.invalid && (itemForm.get('username')?.dirty || itemForm.get('username')?.touched) }" />
            <div
              *ngIf="itemForm.get('username')?.invalid && (itemForm.get('username')?.dirty || itemForm.get('username')?.touched)"
              class="invalid-feedback">
              Username is required.
            </div>
          </div>

          <!-- Email Field -->
          <div class="form-group mb-3">
            <label for="email">Email</label>
            <input type="email" id="email" formControlName="email" class="form-control" placeholder="Enter email"
              [ngClass]="{ 'is-invalid': itemForm.get('email')?.invalid && (itemForm.get('email')?.dirty || itemForm.get('email')?.touched) }" />
            <div
              *ngIf="itemForm.get('email')?.invalid && (itemForm.get('email')?.dirty || itemForm.get('email')?.touched)"
              class="invalid-feedback">
              <small *ngIf="itemForm.get('email')?.errors?.['required']">
                Email is required.
              </small>
              <small *ngIf="itemForm.get('email')?.errors?.['pattern']">
                Enter a valid email.
              </small>
            </div>
          </div>

          <!-- Password Field -->
          <div class="form-group mb-3">
            <label for="password">Password</label>
            <input type="password" id="password" formControlName="password" class="form-control"
              placeholder="Enter password"
              [ngClass]="{ 'is-invalid': itemForm.get('password')?.invalid && (itemForm.get('password')?.dirty || itemForm.get('password')?.touched) }" />
            <div
              *ngIf="itemForm.get('password')?.invalid && (itemForm.get('password')?.dirty || itemForm.get('password')?.touched)"
              class="invalid-feedback">
              <small *ngIf="itemForm.get('password')?.errors?.['required']">
                Password is required.
              </small>
              <small *ngIf="itemForm.get('password')?.errors?.['pattern']">
                Password should have minimum of 8 characters
              </small>
            </div>
          </div>

          <!-- Role Field -->
          <div class="form-group mb-3">
            <label for="role">Role</label>
            <select id="role" formControlName="role" class="form-control" placeholder="Select Role"
              [ngClass]="{ 'is-invalid': itemForm.get('role')?.invalid && (itemForm.get('role')?.dirty || itemForm.get('role')?.touched) }">
              <option value="" selected>Select Role</option>
              <option value="PATIENT">Patient</option>
              <option value="DOCTOR">Doctor</option>
              <option value="RECEPTIONIST">Receptionist</option>
            </select>
            <div
              *ngIf="itemForm.get('role')?.invalid && (itemForm.get('role')?.dirty || itemForm.get('role')?.touched)"
              class="invalid-feedback">
              Role is required.
            </div>
          </div>

          <!-- Specialty Field (Visible only if role is DOCTOR) -->
          <div *ngIf="itemForm.get('role')?.value === 'DOCTOR'" class="form-group mb-3">
            <label for="specialty">Specialty</label>
            <input type="text" id="specialty" formControlName="specialty" class="form-control"
              placeholder="Enter specialty"
              [ngClass]="{ 'is-invalid': itemForm.get('specialty')?.invalid && (itemForm.get('specialty')?.dirty || itemForm.get('specialty')?.touched) }" />
            <div
              *ngIf="itemForm.get('specialty')?.invalid && (itemForm.get('specialty')?.dirty || itemForm.get('specialty')?.touched)"
              class="invalid-feedback">
              Specialty is required for doctors.
            </div>

            <div class="form-group mb-3">
              <label for="availability">Availability</label>
              <select id="availability" formControlName="availability" class="form-control"
                [ngClass]="{ 'is-invalid': itemForm.get('availability')?.invalid && (itemForm.get('availability')?.dirty || itemForm.get('availability')?.touched) }">
                <option value="" selected>Select availability</option>
                <option value="yes">Yes</option>
                <option value="no">No</option>
              </select>
              <div
                *ngIf="itemForm.get('availability')?.invalid && (itemForm.get('availability')?.dirty || itemForm.get('availability')?.touched)"
                class="invalid-feedback">
                Availability is required for doctors.
              </div>
            </div>
          </div>

          <button type="submit" class="btn btn-primary btn-block">Register</button>
        </form>
      </div>
    </div>
  </div>
</section>